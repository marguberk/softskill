# üéÆ –°–∏—Å—Ç–µ–º–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ MaroAI

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ MaroAI –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –∏–∑—É—á–µ–Ω–∏—é –≥–∏–±–∫–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ —á–µ—Ä–µ–∑ –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏: –æ–ø—ã—Ç (XP), —É—Ä–æ–≤–Ω–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞–≤—ã–∫–æ–≤.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ (XP) –∏ —É—Ä–æ–≤–Ω–µ–π

**–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ XP:**
- üìù –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞: **+10 XP**
- üìö –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–∞: **+100 XP**
- ‚≠ê –û—Ç–ª–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (90%+): **+15 XP –±–æ–Ω—É—Å**
- üéØ –ü–µ—Ä–≤—ã–π –∫—É—Ä—Å: **+50 XP –±–æ–Ω—É—Å**
- üî• –°—Ç—Ä–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: **+5 XP –±–æ–Ω—É—Å**

**–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π:**
1. **–ù–æ–≤–∏—á–æ–∫** (0 XP)
2. **–ù–∞—á–∏–Ω–∞—é—â–∏–π** (150 XP)
3. **–ü—Ä–∞–∫—Ç–∏–∫** (350 XP)
4. **–û–ø—ã—Ç–Ω—ã–π** (600 XP)
5. **–≠–∫—Å–ø–µ—Ä—Ç** (900 XP)
6. **–ú–∞—Å—Ç–µ—Ä** (1250 XP)
7. **–ì—É—Ä—É** (1650 XP)
8. **–õ–µ–≥–µ–Ω–¥–∞** (2100 XP)
9. **–ß–µ–º–ø–∏–æ–Ω** (2600 XP)
10. **–í–µ–ª–∏–∫–∏–π –º–∞—Å—Ç–µ—Ä** (3150 XP)

### 2. –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞–≤—ã–∫–æ–≤

–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫—É—Ä—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –Ω–∞–≤—ã–∫:

**–£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è:**
- –õ—é–±–æ–π —É—Ä–æ–≤–µ–Ω—å: **+20 –±–∞–ª–ª–æ–≤ –∑–∞ –∫—É—Ä—Å** (–µ–¥–∏–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –∫—É—Ä—Å–æ–≤)

**–£—Ä–æ–≤–Ω–∏ –Ω–∞–≤—ã–∫–æ–≤:**
- **BEGINNER** (0-49%)
- **INTERMEDIATE** (50-69%)
- **ADVANCED** (70-84%)
- **EXPERT** (85%+)

### 3. –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –≤—ã–¥–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:

- üéØ **–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏** - –ó–∞–≤–µ—Ä—à–∏—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å
- üìö **–°—Ç—É–¥–µ–Ω—Ç** - –ó–∞–≤–µ—Ä—à–∏—Ç–µ 3 –∫—É—Ä—Å–∞
- üèÜ **–≠–∫—Å–ø–µ—Ä—Ç** - –ó–∞–≤–µ—Ä—à–∏—Ç–µ 5 –∫—É—Ä—Å–æ–≤
- ‚≠ê **–û—Ç–ª–∏—á–Ω–∏–∫** - –ü–æ–ª—É—á–∏—Ç–µ 10 –æ—Ç–ª–∏—á–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫
- üèÉ‚Äç‚ôÇÔ∏è **–ú–∞—Ä–∞—Ñ–æ–Ω–µ—Ü** - –ó–∞–≤–µ—Ä—à–∏—Ç–µ 20 —É—Ä–æ–∫–æ–≤
- üöÄ **–ü–µ—Ä–≤–æ–æ—Ç–∫—Ä—ã–≤–∞—Ç–µ–ª—å** - –ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫
- üí¨ **–ú–∞—Å—Ç–µ—Ä –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏** - –ó–∞–≤–µ—Ä—à–∏—Ç–µ 2 –∫—É—Ä—Å–∞ –ø–æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- üëë **–õ–∏–¥–µ—Ä** - –ó–∞–≤–µ—Ä—à–∏—Ç–µ –∫—É—Ä—Å –ª–∏–¥–µ—Ä—Å—Ç–≤–∞

## üîß API Endpoints

### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–∞
```http
POST /api/v1/gamification/complete-course/{course_id}
Authorization: Bearer {token}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "course_id": 1,
  "course_title": "–û—Å–Ω–æ–≤—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
  "xp_result": {
    "xp_gained": 75,
    "total_xp": 85,
    "old_level": 1,
    "new_level": 1,
    "level_up": false,
    "reason": "course_complete"
  },
  "skill_result": {
    "skill_name": "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è",
    "old_score": 60,
    "new_score": 72,
    "old_level": "INTERMEDIATE",
    "new_level": "ADVANCED",
    "level_up": true,
    "courses_completed": 1
  },
  "achievements": ["–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏"],
  "completion_message": "üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∫—É—Ä—Å \"–û—Å–Ω–æ–≤—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏\"!"
}
```

### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞
```http
POST /api/v1/gamification/complete-lesson/{lesson_id}?score=95
Authorization: Bearer {token}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```http
GET /api/v1/gamification/progress
Authorization: Bearer {token}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "level": 2,
  "current_xp": 85,
  "xp_to_next_level": 265,
  "overall_progress": 2,
  "courses_completed": 1,
  "lessons_completed": 5,
  "perfect_scores": 2,
  "current_streak": 3,
  "longest_streak": 5
}
```

### –î–∞—à–±–æ—Ä–¥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```http
GET /api/v1/gamification/dashboard
Authorization: Bearer {token}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "level": 2,
  "level_name": "–ù–∞—á–∏–Ω–∞—é—â–∏–π",
  "current_xp": 85,
  "next_level_xp": 350,
  "progress_percentage": 24,
  "total_courses": 7,
  "completed_courses": 1,
  "skills_summary": [
    {
      "name": "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è",
      "score": 72,
      "level": "–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π"
    }
  ],
  "recent_achievements": []
}
```

### –ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
```http
GET /api/v1/gamification/profile
Authorization: Bearer {token}
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `user_game_profiles`
```sql
CREATE TABLE user_game_profiles (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    level INTEGER DEFAULT 1,
    experience_points INTEGER DEFAULT 0,
    courses_completed INTEGER DEFAULT 0,
    lessons_completed INTEGER DEFAULT 0,
    perfect_scores INTEGER DEFAULT 0,
    login_streak INTEGER DEFAULT 0,
    longest_streak INTEGER DEFAULT 0,
    badges JSON,
    titles JSON,
    last_login DATETIME,
    last_action DATETIME,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME
);
```

### –¢–∞–±–ª–∏—Ü–∞ `course_completions`
```sql
CREATE TABLE course_completions (
    id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL,
    course_id INTEGER NOT NULL,
    completed_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    final_score INTEGER,
    FOREIGN KEY(user_id) REFERENCES users(id),
    FOREIGN KEY(course_id) REFERENCES courses(id)
);
```

### –¢–∞–±–ª–∏—Ü–∞ `achievements`
```sql
CREATE TABLE achievements (
    id INTEGER PRIMARY KEY,
    title VARCHAR NOT NULL,
    description VARCHAR,
    badge_image VARCHAR,
    required_courses INTEGER,
    required_lessons INTEGER,
    required_score FLOAT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ `user_achievements`
```sql
CREATE TABLE user_achievements (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    achievement_id INTEGER,
    achieved_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(user_id) REFERENCES users(id),
    FOREIGN KEY(achievement_id) REFERENCES achievements(id)
);
```

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
uvicorn main:app --host 0.0.0.0 --port 8002 --reload
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ HTML
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `test_gamification_api.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ curl
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
curl -X POST "http://localhost:8002/api/v1/auth/login" \
     -H "Content-Type: application/x-www-form-urlencoded" \
     -d "username=admin@example.com&password=admin123"

# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–∞
curl -X POST "http://localhost:8002/api/v1/gamification/complete-course/1" \
     -H "Authorization: Bearer YOUR_TOKEN"

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
curl "http://localhost:8002/api/v1/gamification/progress" \
     -H "Authorization: Bearer YOUR_TOKEN"
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
python test_gamification_system.py
```

## üìà –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫—É—Ä—Å–∞:**
   - –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π XP (50) + –±–æ–Ω—É—Å—ã
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –Ω–∞–≤—ã–∫
   - –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –≤—ã–¥–∞—é—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

2. **–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É—Ä–æ–∫–∞:**
   - –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π XP (10) + –±–æ–Ω—É—Å—ã –∑–∞ –æ—Ü–µ–Ω–∫—É
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
   - –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤:**
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞–≤—ã–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –Ω–∞–≤—ã–∫ –ø–æ —Ç–∏–ø—É –∫—É—Ä—Å–∞
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–∞–ª–ª –∏ —É—Ä–æ–≤–µ–Ω—å –Ω–∞–≤—ã–∫–∞
   - –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
python migrate_gamification_table.py
```

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
- –ë–∞–ª–ª—ã –æ–ø—ã—Ç–∞ –∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫—É—Ä—Å–∞–º –∏ —É—Ä–æ–∫–∞–º
- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –Ω–∞–≤—ã–∫–∞–º
- –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

–î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
- –ö–∞—Ä—Ç–æ—á–µ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –î–∞—à–±–æ—Ä–¥–∞ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- –°–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è 